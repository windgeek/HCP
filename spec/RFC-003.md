# RFC-003: Recursive Attribution Model

| Status | Draft |
| :--- | :--- |
| **Author** | HCP Architecture Team |
| **Created** | 2026-02-10 |
| **License** | CC0-1.0 |

## 1. Abstract
This RFC defines the **Recursive Attribution Model (RAM)**, a dependency-tracking system for creative works. When an AI or human uses an HCP-signed component (code, text, art), they must include its `HCP-Manifest` in their own project's metadata. This creates a Directed Acyclic Graph (DAG) of value contribution. We further define a settlement layer using the Lightning Network (LN) to stream micro-royalties recursively up this graph.

## 2. The Problem: The "Black Box" of attribution
Current AI models ingest vast datasets without attribution or compensation. Open Source licenses (MIT, GPL) are legal frameworks, not technical enforcement. We need a *programmable* attribution layer that survives AI remixing.

## 3. The Solution: Nested Manifests

### 3.1. The HCP-Manifest Schema
Every HCP-compliant project MUST include a `.hcp/manifest.json` file.
```json
{
  "project_id": "hcp:ProjectHash",
  "author": "hcp:Identity(RFC-001)",
  "lightning_address": "author@ln.address",
  "entropy_proof": "hcp:EntropyHash(RFC-002)",
  "dependencies": [
    {
      "project_id": "hcp:UpstreamHash_A",
      "weight": 0.05, // 5% royalty attribution
      "role": "core_algorithm"
    },
    {
      "project_id": "hcp:UpstreamHash_B",
      "weight": 0.02, // 2% royalty attribution
      "role": "visualization_library"
    }
  ]
}
```

### 3.2. Recursive Settlement (The "Cascade")
When a consumer pays for the final product (e.g., via a Lightning Paywall or Subscription):
1.  The payment is sent to the Project's lightning node.
2.  The node automatically calculating the split based on `dependencies`.
3.  Micro-payments are routed instantly to upstream authors.
4.  This creates a "Value Cascade" where foundational contributors (often ignored) receive residual income from downstream applications.

### 3.3. Musig2 for Collaborative Works
For projects with multiple direct authors, we use **Musig2** (MuSig-DN) to aggregate their public keys into a single taproot address.
- Settlement: Payments to this address can be spent only when all authors sign.
- Privacy: On-chain, it looks like a single key spend.
- Efficiency: Reduces transaction fees and on-chain footprint.

## 4. Constraint Handling
- **Circular Dependencies**: The protocol forbids circular dependencies in royalty payments (DAG enforced).
- **Dust Limit**: If a recursive split results in a payment below the LN minimum (1 satoshi), it is probabilistically routed or accumulated until a threshold is met.

## 5. Vision
By enabling `RAM`, we turn open source from a donation-based economy into a recursive equity economy. Code becomes an asset class.

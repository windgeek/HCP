# RFC-002: Advanced Human Attribution (AHA)

| Status | Draft |
| :--- | :--- |
| **Author** | HCP Architecture Team |
| **Created** | 2026-02-10 |
| **License** | CC0-1.0 |

## 1. Abstract
This RFC defines the **Advanced Human Attribution (AHA)** engine, a sophisticated "Proof of Humanity" mechanism. Moving beyond simple keystroke timing, AHA validates the **cognitive process** of creation. It proves that code evolved through iterative human refinement (refactoring, backtracking, non-linear editing) rather than single-shot AI generation.

## 2. The Semantic Gap
AI models generate code in a "forward-only" probability stream. They get it right (or wrong) in one go.
Humans oscillate. We write, delete, refactor, pause to think, and rewrite.
**AHA exploits this semantic gap.**

## 3. Core Mechanisms

### 3.1. Iterative Evolution (The Delta History)
AHA analyzes the **lifecycle of a file**, not just its final state.
- **Micro-Commits**: Tracking local undo/redo stacks (in memory) before git commits.
- **Evolutionary Heuristic**: A file is "Human" if it shows a high `Modification/Growth` ratio. AI output is typically high growth, low modification.
- **Refactoring Vectors**: Detecting structural changes (renaming variables, extracting methods) that indicate understanding, vs. content injection.

### 3.2. Cognitive Correlation (Time-on-Task vs. Complexity)
AHA correlates the **time spent** with the **structural complexity** (AST diff) of the change.
- **Metric**: $C_{cognitive} = \frac{\Delta \text{AST}}{\Delta t}$
- **Logic**:
    - **High Complexity / Low Time** ($\rightarrow \infty$): Suspicious (AI Paste).
    - **High Complexity / High Time** ($\approx 1$): Verified Human Work.
    - **Low Complexity / High Time** ($\rightarrow 0$): Cognitive Pauses (Thinking).

### 3.3. Privacy-Preserving Proofs (ZKP)
To verify behavior without surveillance, AHA uses **Zero-Knowledge Proofs**.
- **The Secret**: The raw keystroke logs and AST diffs (which contain sensitive code).
- **The Proof**: A cryptographic proof $\pi$ that:
    - "The user spent $t$ seconds."
    - "The edit distance was $d$."
    - "The cognitive correlation $C$ is within human range $[0.1, 10.0]$."
- **Verification**: The verifier sees only the validity of $\pi$, not the code or the timing.

## 4. Implementation Strategy (Phase 4)

### 4.1. The "Observer" Sidecar
A local daemon (`hcp-observer`) that hooks into the IDE (LSP) to capture AST events.
- **Input**: File save events, Git pre-commit hooks.
- **Processing**: Calculates AST diffs using tree-sitter.

### 4.2. The ZKP Circuit
A zk-SNARK circuit (e.g., Circom/Groth16) that takes:
- **Private Inputs**: Timestamps $t_1...t_n$, Edit Events $E_1...E_n$.
- **Public Output**: AHA-Score, Proof $\pi$.

## 5. Security Model
- **Threat**: AI Replay Attack (AI generating fake keystrokes).
- **Defense**: The "Cost of Simulation". To fake the ZKP, the AI must simulate not just the code, but the *entire plausible history of thought* that led to it, including realistic errors and structural refactors, which is computationally expensive/infeasible.
